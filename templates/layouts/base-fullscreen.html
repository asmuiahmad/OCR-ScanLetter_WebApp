<!DOCTYPE html>
<html lang="en">
{% include 'includes/head.html' %}

<body class="bg-gray-50">
  <meta name="csrf-token" content="{{ csrf_token() }}">
  
  <!-- Top Navigation Bar (without sidebar) -->
  <nav class="bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <!-- Left side - Logo and title -->
        <div class="flex items-center">
          <div class="flex-shrink-0 flex items-center">
            <i class="fas fa-envelope-open-text text-blue-600 text-xl mr-3"></i>
            <span class="font-bold text-xl text-gray-900">Surat App</span>
          </div>
          {% if page_title %}
          <div class="hidden md:block ml-6 pl-6 border-l border-gray-200">
            <h1 class="text-lg font-medium text-gray-900">{{ page_title }}</h1>
          </div>
          {% endif %}
        </div>
        
        <!-- Right side - User menu -->
        <div class="flex items-center space-x-4">
          <!-- User dropdown -->
          <div class="relative">
            <button type="button" class="flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
              <span class="sr-only">Open user menu</span>
              <div class="h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center">
                <span class="text-sm font-medium text-white">
                  {{ current_user.username[0].upper() if current_user and current_user.username else 'U' }}
                </span>
              </div>
              <span class="hidden md:block ml-2 text-sm font-medium text-gray-700">
                {{ current_user.username if current_user and current_user.username else 'User' }}
              </span>
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-400"></i>
            </button>
            
            <!-- Dropdown menu -->
            <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" id="user-menu">
              <div class="py-1" role="none">
                <a href="{{ url_for('dashboard.dashboard') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                  <i class="fas fa-home mr-2"></i>Dashboard
                </a>
                <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">
                  <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </a>
              </div>
            </div>
          </div>
          
          <!-- Back to Dashboard button -->
          <a href="{{ url_for('dashboard.dashboard') }}" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            <i class="fas fa-arrow-left mr-2"></i>
            <span class="hidden sm:inline">Kembali</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main content area -->
  <main class="pt-16 min-h-screen">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center">
        <p class="text-sm text-gray-500">
          Â© 2024 Surat App. All rights reserved.
        </p>
        <div class="flex space-x-4">
          <span class="text-xs text-gray-400">
            Version 1.0
          </span>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript for dropdown -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const userMenuButton = document.getElementById('user-menu-button');
      const userMenu = document.getElementById('user-menu');
      
      if (userMenuButton && userMenu) {
        userMenuButton.addEventListener('click', function() {
          userMenu.classList.toggle('hidden');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
          if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
            userMenu.classList.add('hidden');
          }
        });
      }
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>